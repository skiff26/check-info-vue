import{a as b}from"./axios-aba6f0e0.js";import{S as k}from"./Sidebar-04c68a5f.js";import{_ as h,o as l,c as i,a as n,t as o,b as _,w as T,T as x,F as g,r as W,d as w,e as V,f as L,g as p,h as u,v as I,i as f,j as v,k as M,p as O,l as N}from"./index-040902cf.js";const B={props:{options:{type:Array,default(){return[]}},selected:{type:String,default:""}},data(){return{areOptionsVisible:!1}},methods:{selectOption(t){this.$emit("select",t),this.areOptionsVisible=!1},hideSelect(){this.areOptionsVisible=!1}},mounted(){window.addEventListener("click",t=>{this.$el.contains(t.target)||(this.areOptionsVisible=!1)})},beforeMount(){document.removeEventListener("click",this.hideSelect)}},A={class:"v-select"},F={key:0,class:"options"},R=["onClick"];function $(t,a,c,m,e,s){return l(),i("div",A,[n("div",{onClick:a[0]||(a[0]=r=>e.areOptionsVisible=!e.areOptionsVisible),class:"title"},o(c.selected),1),_(x,{"enter-active-class":"enter-active","enter-from-class":"enter-from","enter-to-class":"enter-to","leave-active-class":"leave-active","leave-from-class":"leave-from","leave-to-class":"leave-to"},{default:T(()=>[e.areOptionsVisible?(l(),i("ul",F,[(l(!0),i(g,null,W(c.options,r=>(l(),i("li",{key:r.value,onClick:y=>s.selectOption(r)},o(r.name),9,R))),128))])):w("",!0)]),_:1})])}const D=h(B,[["render",$],["__scopeId","data-v-f6dac422"]]);const E={},K={class:"w-loader"},P=V('<div class="snow" data-v-18a7d55a><span style="--i:11;" data-v-18a7d55a></span><span style="--i:12;" data-v-18a7d55a></span><span style="--i:15;" data-v-18a7d55a></span><span style="--i:17;" data-v-18a7d55a></span><span style="--i:18;" data-v-18a7d55a></span><span style="--i:13;" data-v-18a7d55a></span><span style="--i:14;" data-v-18a7d55a></span><span style="--i:19;" data-v-18a7d55a></span><span style="--i:20;" data-v-18a7d55a></span><span style="--i:10;" data-v-18a7d55a></span><span style="--i:18;" data-v-18a7d55a></span><span style="--i:13;" data-v-18a7d55a></span><span style="--i:14;" data-v-18a7d55a></span><span style="--i:19;" data-v-18a7d55a></span><span style="--i:20;" data-v-18a7d55a></span><span style="--i:10;" data-v-18a7d55a></span><span style="--i:18;" data-v-18a7d55a></span><span style="--i:13;" data-v-18a7d55a></span><span style="--i:14;" data-v-18a7d55a></span><span style="--i:19;" data-v-18a7d55a></span><span style="--i:20;" data-v-18a7d55a></span><span style="--i:10;" data-v-18a7d55a></span></div>',1),j=[P];function q(t,a){return l(),i("div",K,j)}const U=h(E,[["render",q],["__scopeId","data-v-18a7d55a"]]);const Y={props:["info"],emits:["close"],computed:{flagCountry(){return`./src/assets/flags/${this.info.sys.country.toLowerCase()}.png`},flagAltCountry(){return this.info.sys.country.toLowerCase().repeat(2)},showTemp(){return"Температура: "+Math.ceil(this.info.main.temp)+"°"},showFeelsLike(){return"Ощущается как: "+Math.round(this.info.main.feels_like)+"°"},showMinTemp(){return"Минимальная температура: "+Math.round(this.info.main.temp_min)+"°"},showMaxTemp(){return"Максимальная температура: "+Math.round(this.info.main.temp_max)+"°"},showCountry(){return"Код страны: "+this.info.sys.country}}},z={class:"results"},G=["src","alt"];function H(t,a,c,m,e,s){return l(),i("div",z,[n("p",null,[L(o(s.showCountry),1),n("img",{style:{"margin-left":"5px"},width:"20",src:s.flagCountry,alt:s.flagAltCountry},null,8,G)]),n("p",null,o(s.showTemp),1),n("p",null,o(s.showFeelsLike),1),n("p",null,o(s.showMinTemp),1),n("p",null,o(s.showMaxTemp),1),n("div",{onClick:a[0]||(a[0]=r=>t.$emit("close")),class:"close"},"Очистить")])}const J=h(Y,[["render",H],["__scopeId","data-v-590d8f44"]]);const Q={components:{Sidebar:k,CourntySelect:D,TheWeatherLoader:U,TheSuccessWeatherResult:J},data(){return{city:"",error:"",info:null,loading:!1,selected:"Выбрать",options:[{name:"Warsaw",value:1},{name:"Kherson",value:2},{name:"New York",value:3},{name:"Berlin",value:4},{name:"Barcelona",value:5},{name:"Amsterdam",value:6},{name:"Bern",value:7},{name:"Dublin",value:8},{name:"London",value:9},{name:"Paris",value:10}]}},computed:{cityName(){return"«"+this.city+"»"}},methods:{getWeather(){this.loading=!0,setTimeout(()=>{if(this.city.trim().length<2)return this.error="Некорректное название",!1;this.selected=this.city,b.get(`https://api.openweathermap.org/data/2.5/weather?q=${this.city}&units=metric&appid=412a4694e6276bff6bdfd0736749921f`).then(t=>(this.info=t.data,this.loading=!1))},500)},optionSelect(t){this.selected=t.name,this.city=t.name},clearInfo(){this.info=null,this.selected="Выбрать",this.city=""}}},X=t=>(O("data-v-c0a5377a"),t=t(),N(),t),Z={class:"wrapper"},ee=X(()=>n("h1",null,"Погодное приложение",-1)),te={class:"subtitle"},se={key:1,class:"button",disabled:""};function ae(t,a,c,m,e,s){const r=p("Sidebar"),y=p("CourntySelect"),S=p("TheWeatherLoader"),C=p("TheSuccessWeatherResult");return l(),i(g,null,[_(r),n("div",Z,[ee,n("p",te,"Узнать погоду в "+o(e.city==""?"вашем городе":s.cityName),1),u(n("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=d=>e.city=d),onKeydown:[a[1]||(a[1]=f(d=>s.getWeather(),["enter"])),a[2]||(a[2]=f(d=>s.clearInfo(),["esc"]))],placeholder:"Введите город"},null,544),[[I,e.city]]),e.city!=""?(l(),i("button",{key:0,class:"button",onClick:a[3]||(a[3]=d=>s.getWeather())},"Получить погоду")):(l(),i("button",se,"Введите название города")),_(y,{options:e.options,selected:e.selected,onSelect:s.optionSelect},null,8,["options","selected","onSelect"]),u(n("p",{class:"selectCity"},o("Выбранный город: "+e.selected),513),[[v,e.selected!="Выбрать"]]),u(n("p",{class:"error"},o(e.error),513),[[v,e.error]]),u(_(S,null,null,512),[[v,e.loading]]),e.info!=null&&e.loading===!1?(l(),M(C,{key:2,info:e.info,onClose:s.clearInfo},null,8,["info","onClose"])):w("",!0)])],64)}const ie=h(Q,[["render",ae],["__scopeId","data-v-c0a5377a"]]);export{ie as default};
